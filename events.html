<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events - La Porte</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="image/logoicon.ico" />
</head>
<body class="events-page">
    <div class="menu-bar">
        <div class="menu-content">
            <a href="home.html" class="logo-container">
                <img src="image/logo/verticallaportelogo.png" alt="La Porte" class="menu-logo">
            </a>
            <button class="mobile-menu-toggle">
                <img src="image/menu.svg" alt="Menu" class="menu-icon">
            </button>
            <div class="menu-items">
                <a href="pdf/menu.pdf" target="_blank" class="menu-item">MENU</a>   
                <a href="events.html" class="menu-item">EVENTS</a>
                <a href="reservations.html" class="menu-item">RESERVATIONS</a>
                <a href="guestlist.html" class="menu-item">GUEST LIST</a>
            </div>
        </div>
    </div>

    <main class="main-content">
        <div class="content-section">
            <div class="upcoming-events">
                <div class="section-title">
                    <h2><span class="red-letter">P</span>ROMO</h2>
                </div>
                <div class="events-grid">
                    <div class="carousel-container">
                        <div class="event-card">
                            <div class="event-image">
                                <img src="image/events/event4.png" alt="Event 1">
                            </div>
                        </div>
                        <div class="event-card">
                            <div class="event-image">
                                <img src="image/events/event5.png" alt="Event 2">
                            </div>
                        </div>
                        <div class="event-card">
                            <div class="event-image">
                                <img src="image/events/event6.png" alt="Event 3">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="upcoming-section">
            <div class="experience-content">
                <h2 style="margin-top: 6rem;">U<span class="red-letter">P</span>COMING EVENTS</h2> 
                <div class="events-grid">
                    <div class="carousel-container">
                        <div class="event-card">
                            <div class="event-image">
                                <img src="image/events/event1.png" alt="Event 4">
                            </div>
                            <div class="event-details">
                                <h3>Hip Hop/Amapiano</h3>
                                <p>Every Thursday</p>
                                <p>DJ Jokege</p>
                            </div>
                        </div>
                        <div class="event-card">
                            <div class="event-image">
                                <img src="image/events/event2.png" alt="Event 5">
                            </div>
                            <div class="event-details">
                                <h3>Afro Caribbean</h3>
                                <p>Every Friday</p>
                                <p>DJ Apache</p>
                            </div>
                        </div>
                        <div class="event-card">
                            <div class="event-image">
                                <img src="image/events/event3.png" alt="Event 6">
                            </div>
                            <div class="event-details">
                                <h3>Link Up</h3>
                                <p>Every Sunday</p>
                                <p>DJ Jokege</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="imageModal" class="modal">
            <span class="close">&times;</span>
            <img class="modal-content" id="modalImg">
        </div>
    </main>

    <footer class="footer">
        <div class="footer-left">
            <img src="image/logo/fullHorizontallogo.png" alt="La Porte Logo" class="footer-logo">
        </div>
        
        <nav class="footer-nav">
            <a href="pdf/menu.pdf" target="_blank" class="footer-link">MENU</a>
            <a href="contact.html" class="footer-link">CONTACT</a>
            <a href="events.html" class="footer-link">EVENTS</a>
            <a href="" class="footer-link">RESERVATIONS</a>
            <a href="" class="footer-link">GUEST LIST</a>
        </nav>
        
        <div class="footer-right">
            <div class="footer-info">
                <div class="info-item">LA <span class="footer-red-letter">P</span>ORTE</div>
                <div class="info-item">
                    <a href="https://www.google.com/maps/search/?api=1&query=3519+Boul.+St-Laurent+Montreal+QC+H2X+2T6" target="_blank" class="footer-link">
                        3519 Boul. St-Laurent, Montreal, QC H2X 2T6
                    </a>
                </div>
                <div class="info-item">
                    <a href="tel:438-380-8007" class="footer-link">438.380.8007</a>
                </div>
                <div class="powered-by">
                    <a>Powered by <a href="https://github.com/Veryba" target="_blank" class="footer-link"><span class="footer-red-letter">Veryba</span></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuBar = document.querySelector('.menu-bar');
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const menuItems = document.querySelector('.menu-items');
            let lastScrollPosition = window.scrollY;
            let ticking = false;

            // Mobile menu toggle
            mobileMenuToggle.addEventListener('click', () => {
                const isExpanded = menuItems.classList.contains('show');
                if (isExpanded) {
                    menuItems.classList.remove('show');
                    menuBar.classList.remove('expanded-mobile');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                } else {
                    menuBar.classList.add('expanded-mobile');
                    mobileMenuToggle.setAttribute('aria-expanded', 'true');
                    setTimeout(() => {
                        menuItems.classList.add('show');
                    }, 200);
                }
            });

            // Close menu when clicking menu items
            menuItems.addEventListener('click', (e) => {
                if (e.target.classList.contains('menu-item')) {
                    menuItems.classList.remove('show');
                    setTimeout(() => {
                        menuBar.classList.remove('expanded-mobile');
                        mobileMenuToggle.setAttribute('aria-expanded', 'false');
                    }, 200);
                }
            });

            // Handle scroll event
            window.addEventListener('scroll', () => {
                lastScrollPosition = window.scrollY;
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        const windowHeight = window.innerHeight;
                        if (window.innerWidth > 1220) {
                            if (lastScrollPosition >= windowHeight) {
                                menuBar.classList.add('expanded');
                            } else {
                                menuBar.classList.remove('expanded');
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });

            // Modal setup
            const modal = document.getElementById("imageModal");
            const modalImg = document.getElementById("modalImg");
            const closeBtn = document.getElementsByClassName("close")[0];

            document.querySelectorAll('.event-card').forEach(card => {
                card.addEventListener('click', function() {
                    const img = this.querySelector('img');
                    modal.style.display = "block";
                    modalImg.src = img.src;
                    setTimeout(() => modal.classList.add('show'), 10);
                });
            });

            function closeModal() {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = "none";
                }, 300);
            }

            closeBtn.onclick = closeModal;
            modal.onclick = (e) => {
                if (e.target === modal) closeModal();
            };

            // Initialize all carousels
            document.querySelectorAll('.carousel-container').forEach(carouselContainer => {
                const cards = Array.from(carouselContainer.querySelectorAll('.event-card'));
                let currentIndex = 0;
                let startX = 0;
                let isDragging = false;

                // Create dots
                const dotsContainer = document.createElement('div');
                dotsContainer.className = 'carousel-dots';
                cards.forEach((_, index) => {
                    const dot = document.createElement('div');
                    dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
                    dot.addEventListener('click', () => goToSlide(index));
                    dotsContainer.appendChild(dot);
                });
                carouselContainer.parentNode.insertBefore(dotsContainer, carouselContainer.nextSibling);

                function updateCarousel() {
                    cards.forEach((card, index) => {
                        card.classList.remove('active', 'prev', 'next');
                        if (index === currentIndex) {
                            card.classList.add('active');
                        } else if (index === (currentIndex - 1 + cards.length) % cards.length) {
                            card.classList.add('prev');
                        } else if (index === (currentIndex + 1) % cards.length) {
                            card.classList.add('next');
                        }
                    });
                }

                function updateDots() {
                    dotsContainer.querySelectorAll('.carousel-dot').forEach((dot, index) => {
                        dot.classList.toggle('active', index === currentIndex);
                    });
                }

                function goToSlide(index) {
                    currentIndex = index;
                    updateCarousel();
                    updateDots();
                }

                function nextSlide() {
                    currentIndex = (currentIndex + 1) % cards.length;
                    updateCarousel();
                    updateDots();
                }

                function prevSlide() {
                    currentIndex = (currentIndex - 1 + cards.length) % cards.length;
                    updateCarousel();
                    updateDots();
                }

                // Touch events
                carouselContainer.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    isDragging = true;
                });

                carouselContainer.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                    
                    const currentX = e.touches[0].clientX;
                    const diff = startX - currentX;
                    
                    if (Math.abs(diff) > 20) {
                        cards[currentIndex].style.transform = `translateX(calc(-50% - ${diff}px)) scale(${1 - Math.abs(diff) / 1000})`;
                    }
                });

                carouselContainer.addEventListener('touchend', (e) => {
                    if (!isDragging) return;
                    
                    const endX = e.changedTouches[0].clientX;
                    const diffX = startX - endX;

                    cards[currentIndex].style.transform = '';

                    if (Math.abs(diffX) > 50) {
                        if (diffX > 0) {
                            nextSlide();
                        } else {
                            prevSlide();
                        }
                    }

                    isDragging = false;
                });

                // Initialize carousel
                updateCarousel();

                // Auto advance
                setInterval(nextSlide, 5000);
            });
        });
    </script>
</body>
</html>